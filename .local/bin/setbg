#!/bin/sh


wall_dir=$HOME/pics/walls/
current_wall=$(cat $HOME/.config/wallpaper.conf)
if [ "$1" = "-b" ]; then
	wall_dir="$wall_dir"bussin/
fi

if [ "$1"="-b" ] || [ -z "$1" ]; then
	wall="$(find "$wall_dir" -type f -name "*.jpg" -o -name ".png" | shuf -n1)"
elif [ "$1" != "-b" ]; then
	wall="$1"
fi
echo "$wall" > $HOME/.config/wallpaper.conf
xwallpaper --zoom "$wall"
wal -c
wal -i "$wall"
sed  -i 'N;$!P;D' $HOME/.cache/wal/colors-wal-dwm.h
(cd $HOME/.local/src/dwm && sudo make clean install>/dev/null)
(cd $HOME/.local/src/dmenu && sudo make clean install>/dev/null)
